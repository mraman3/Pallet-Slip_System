datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model Client {
  id               Int              @id @default(autoincrement())
  name             String
  address          String
  city             String
  province         String
  postal           String
  active           Boolean          @default(true)
  created_at       DateTime         @default(now())
  updated_at       DateTime         @updatedAt

  addresses        ClientAddress[]
  slips            Slip[]
}

model ClientAddress {
  id            Int       @id @default(autoincrement())
  client_id     Int
  location_name String
  address       String
  city          String
  province      String
  postal        String
  active        Boolean   @default(true)
  created_at    DateTime  @default(now())
  updated_at    DateTime  @updatedAt

  client        Client    @relation(fields: [client_id], references: [id])
  slips         Slip[]
}

model Clerk {
  id         Int      @id @default(autoincrement())
  name       String
  active     Boolean  @default(true)
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  slips      Slip[]
}

model PalletType {
  id         Int        @id @default(autoincrement())
  name       String
  active     Boolean    @default(true)
  created_at DateTime   @default(now())
  updated_at DateTime   @updatedAt

  items      SlipItem[]
}

model Slip {
  id                 Int            @id @default(autoincrement())
  slip_number        String         @unique
  client_id          Int
  ship_to_address_id Int
  date               DateTime
  clerk_id           Int
  customer_order     String
  date_shipped       DateTime?
  shipped_via        String
  comments_line1     String?
  comments_line2     String?
  created_at         DateTime       @default(now())
  updated_at         DateTime       @updatedAt

  client             Client         @relation(fields: [client_id], references: [id])
  ship_to_address    ClientAddress  @relation(fields: [ship_to_address_id], references: [id])
  clerk              Clerk          @relation(fields: [clerk_id], references: [id])
  items              SlipItem[]
}

model SlipItem {
  id             Int        @id @default(autoincrement())
  slip_id        Int
  pallet_type_id Int
  qty_ordered    String
  qty_shipped    String
  created_at     DateTime   @default(now())
  updated_at     DateTime   @updatedAt

  slip           Slip       @relation(fields: [slip_id], references: [id])
  pallet_type    PalletType @relation(fields: [pallet_type_id], references: [id])
}
